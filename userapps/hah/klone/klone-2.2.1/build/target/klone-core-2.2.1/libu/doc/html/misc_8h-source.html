<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LibU: misc.h Source File</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>misc.h</h1><div class="fragment"><pre>00001 <span class="comment">/* </span>
00002 <span class="comment"> * Copyright (c) 2005-2008 by KoanLogic s.r.l. - All rights reserved.  </span>
00003 <span class="comment"> */</span>
00004 
00005 <span class="preprocessor">#ifndef _U_MISC_H_</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define _U_MISC_H_</span>
00007 <span class="preprocessor"></span>
00008 <span class="preprocessor">#include &lt;u/libu_conf.h&gt;</span>
00009 
00010 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
00011 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00012 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00013 <span class="preprocessor">#include &lt;limits.h&gt;</span>
00014 
00015 
00016 <span class="preprocessor">#ifdef __cplusplus</span>
00017 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00018 <span class="preprocessor">#endif</span>
00019 <span class="preprocessor"></span>
00020 <span class="keyword">struct </span>sockaddr; <span class="comment">/* forward declaration */</span>
00021 
00022 <span class="comment">/* define U_PATH_MAX */</span>
00023 <span class="preprocessor">#ifndef PATH_MAX</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#define U_PATH_MAX 4096</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define U_PATH_MAX PATH_MAX</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00028 <span class="preprocessor"></span>
00029 <span class="comment">/* define U_NAME_MAX */</span>
00030 <span class="preprocessor">#ifdef NAME_MAX</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#define U_NAME_MAX NAME_MAX</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#ifdef FILENAME_MAX</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define U_NAME_MAX FILENAME_MAX</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#define U_NAME_MAX 512</span>
00037 <span class="preprocessor"></span><span class="preprocessor">#endif </span>
00038 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00039 <span class="preprocessor"></span>
00040 <span class="comment">/* define U_FILENAME_MAX (path + name) */</span>
00041 <span class="preprocessor">#define U_FILENAME_MAX (U_PATH_MAX + U_NAME_MAX)</span>
00042 <span class="preprocessor"></span>
00043 <span class="preprocessor">#define U_ONCE if (({ static int __x = 0; int __y; __y = __x; __x = 1; !__y;}))</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define U_SSTRCPY(to, from) u_sstrncpy((to), (from), sizeof(to) - 1)</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define U_FREE(ptr) do {if (ptr) { u_free(ptr); ptr = NULL; }} while (0)</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define U_FREEF(ptr, func) do {if (ptr) { func(ptr); ptr = NULL; }} while (0)</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define U_CLOSE(fd) do {if (fd != -1) { close(fd); fd = -1; }} while (0)</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define U_FCLOSE(fp) do {if (fp) { fclose(fp); fp = NULL; }} while (0)</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define U_PCLOSE(pp) do {if (pp) { pclose(pp); pp = NULL; }} while (0)</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define U_MIN(a, b) ((a) &lt; (b) ? (a) : (b))</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define U_MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define u_unused_args(...) u_use_unused_args(NULL, __VA_ARGS__)</span>
00053 <span class="preprocessor"></span>
00054 <span class="comment">/* I/O */</span>
00055 <span class="keyword">typedef</span> ssize_t (*iof_t) (<span class="keywordtype">int</span>, <span class="keywordtype">void</span> *, size_t);
00056 
00057 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga18">u_io</a> (iof_t f, <span class="keywordtype">int</span> sd, <span class="keywordtype">void</span> *buf, size_t l, ssize_t *n, <span class="keywordtype">int</span> *iseof);
00058 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga3">u_isnl</a> (<span class="keywordtype">int</span> c);
00059 <span class="keywordtype">void</span> <a class="code" href="group__misc.html#ga1">u_trim</a> (<span class="keywordtype">char</span> *s);
00060 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga0">u_isblank</a> (<span class="keywordtype">int</span> c);
00061 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga2">u_isblank_str</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *ln);
00062 <span class="keywordtype">char</span> *<a class="code" href="group__misc.html#ga4">u_strndup</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s, size_t len);
00063 <span class="keywordtype">char</span> *<a class="code" href="group__misc.html#ga5">u_strdup</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s);
00064 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga6">u_savepid</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *pf);
00065 <span class="keywordtype">char</span> *<a class="code" href="group__misc.html#ga7">u_sstrncpy</a> (<span class="keywordtype">char</span> *dst, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, size_t size);
00066 <span class="keywordtype">void</span>* <a class="code" href="group__misc.html#ga8">u_memdup</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *src, size_t size);
00067 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga11">u_tokenize</a> (<span class="keywordtype">char</span> *wlist, <span class="keyword">const</span> <span class="keywordtype">char</span> *delim, <span class="keywordtype">char</span> **tokv, size_t tokv_sz);
00068 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga9">u_strtok</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *delim, <span class="keywordtype">char</span> ***ptv, size_t *pnelems);
00069 <span class="keywordtype">void</span> <a class="code" href="group__misc.html#ga10">u_strtok_cleanup</a> (<span class="keywordtype">char</span> **tv, size_t nelems);
00070 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga12">u_snprintf</a> (<span class="keywordtype">char</span> *str, size_t size, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);
00071 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga13">u_path_snprintf</a> (<span class="keywordtype">char</span> *str, size_t size, <span class="keywordtype">char</span> sep, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);
00072 <span class="keywordtype">void</span> u_use_unused_args (<span class="keywordtype">char</span> *dummy, ...);
00073 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga15">u_data_is_bin</a> (<span class="keywordtype">char</span> *data, size_t sz);
00074 <span class="keywordtype">int</span> u_data_dump (<span class="keywordtype">char</span> *data, size_t sz, <span class="keyword">const</span> <span class="keywordtype">char</span> *file);
00075 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga17">u_load_file</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *path, size_t sz_max, <span class="keywordtype">char</span> **pbuf, size_t *psz);
00076 ssize_t <a class="code" href="group__misc.html#ga20">u_read</a>(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, size_t size);
00077 ssize_t <a class="code" href="group__misc.html#ga21">u_write</a>(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, size_t size);
00078 <span class="keywordtype">int</span> <a class="code" href="group__net.html#ga17">u_accept</a>(<span class="keywordtype">int</span> s, <span class="keyword">struct</span> sockaddr *addr, <span class="keywordtype">int</span> *addrlen);
00079 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga19">u_sleep</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> secs);
00080 <span class="keywordtype">int</span> <a class="code" href="group__misc.html#ga22">u_atoi</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *nptr, <span class="keywordtype">int</span> *pi);
00081 <span class="keywordtype">int</span> u_strlcpy(<span class="keywordtype">char</span> *dst, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, size_t size);
00082 <span class="keywordtype">int</span> u_strlcat(<span class="keywordtype">char</span> *dst, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, size_t size);
00083 
00084 <span class="preprocessor">#ifdef HAVE_STRTOUMAX</span>
00085 <span class="preprocessor"></span><span class="preprocessor">#include &lt;inttypes.h&gt;</span>
00086 <span class="keywordtype">int</span> u_atoumax (<span class="keyword">const</span> <span class="keywordtype">char</span> *nptr, uintmax_t *pumax);
00087 <span class="preprocessor">#endif  </span><span class="comment">/* HAVE_STRTOUMAX */</span>
00088 
00089 <span class="preprocessor">#ifdef __cplusplus</span>
00090 <span class="preprocessor"></span>}
00091 <span class="preprocessor">#endif</span>
00092 <span class="preprocessor"></span>
00093 <span class="preprocessor">#endif </span><span class="comment">/* !_U_MISC_H_ */</span>
</pre></div><hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/kl/cont/gb/html/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2008 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
