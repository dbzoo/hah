<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LibU: config.h Source File</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>config.h</h1><div class="fragment"><pre>00001 <span class="comment">/* </span>
00002 <span class="comment"> * Copyright (c) 2005-2008 by KoanLogic s.r.l. - All rights reserved.  </span>
00003 <span class="comment"> */</span>
00004 
00005 <span class="preprocessor">#ifndef _U_CONFIG_H_</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define _U_CONFIG_H_</span>
00007 <span class="preprocessor"></span>
00008 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00009 <span class="preprocessor">#include &lt;u/libu_conf.h&gt;</span>
00010 
00011 <span class="preprocessor">#ifdef __cplusplus</span>
00012 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="keyword">struct </span>u_config_s;
00016 <span class="keyword">typedef</span> <span class="keyword">struct </span>u_config_s u_config_t;
00017 
00018 <span class="keyword">struct </span>u_config_driver_s
00019 {
00020     int (*open)(<span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <span class="keywordtype">void</span> **parg);
00021     int (*close)(<span class="keywordtype">void</span> *arg);
00022     <span class="keywordtype">char</span>* (*gets)(<span class="keywordtype">void</span> *arg, <span class="keywordtype">char</span> *buf, size_t size);
00023     int (*resolv)(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> *uri, size_t uri_bufsz);
00024 };
00025 <span class="keyword">typedef</span> <span class="keyword">struct </span>u_config_driver_s u_config_driver_t;
00026 
00027 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga24">u_config_create</a>(u_config_t **pc);
00028 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga26">u_config_free</a>(u_config_t *c);
00029 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga22">u_config_load</a>(u_config_t *c, <span class="keywordtype">int</span> fd, <span class="keywordtype">int</span> overwrite);
00030 
00031 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga23">u_config_load_from_file</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *file, u_config_t **pc);
00032 
00033 <span class="keywordtype">int</span> u_config_load_from_drv(<span class="keyword">const</span> <span class="keywordtype">char</span> *uri, u_config_driver_t *drv, 
00034         <span class="keywordtype">int</span> overwrite, u_config_t **pc);
00035 
00036 <span class="keyword">typedef</span> <span class="keywordtype">char</span>* (*u_config_gets_t)(<span class="keywordtype">void</span> *arg, <span class="keywordtype">char</span> *buf, size_t size);
00037 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga21">u_config_load_from</a>(u_config_t *c, u_config_gets_t cb, 
00038     <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> overwrite);
00039 
00040 <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group__config.html#ga27">u_config_get_key</a>(u_config_t *c);
00041 <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group__config.html#ga28">u_config_get_value</a>(u_config_t *c);
00042 
00043 <span class="keywordtype">int</span> u_config_get_subkey(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *subkey, u_config_t **pc);
00044 <span class="keywordtype">int</span> u_config_get_subkey_nth(u_config_t *c,<span class="keyword">const</span> <span class="keywordtype">char</span> *subkey, <span class="keywordtype">int</span> n, 
00045     u_config_t **pc);
00046 
00047 <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group__config.html#ga29">u_config_get_subkey_value</a>(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *subkey);
00048 
00049 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga31">u_config_get_subkey_value_b</a>(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *subkey, <span class="keywordtype">int</span> def, 
00050     <span class="keywordtype">int</span> *out);
00051 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga30">u_config_get_subkey_value_i</a>(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *subkey, <span class="keywordtype">int</span> def, 
00052     <span class="keywordtype">int</span> *out);
00053 
00054 <span class="keywordtype">int</span> u_config_add_key(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> <span class="keywordtype">char</span> *val);
00055 <span class="keywordtype">int</span> u_config_set_key(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> <span class="keywordtype">char</span> *val);
00056 
00057 <span class="keywordtype">int</span> u_config_add_child(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, u_config_t **pc);
00058 <span class="keywordtype">int</span> u_config_set_value(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *val);
00059 u_config_t* u_config_get_child_n(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">int</span> n);
00060 u_config_t* u_config_get_child(u_config_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *key);
00061 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga25">u_config_del_child</a>(u_config_t *c, u_config_t *child);
00062 
00063 <span class="keywordtype">int</span> u_config_has_children(u_config_t *c);
00064 <span class="keywordtype">int</span> u_config_save_to_buf(u_config_t *c, <span class="keywordtype">char</span> *buf, size_t size);
00065 <span class="keywordtype">int</span> u_config_load_from_buf(<span class="keywordtype">char</span> *buf, size_t len, u_config_t **pc);
00066 
00067 <span class="keywordtype">void</span> <a class="code" href="group__config.html#ga6">u_config_print_to_fp</a>(u_config_t *c, FILE *fp, <span class="keywordtype">int</span> lev);
00068 <span class="keywordtype">void</span> <a class="code" href="group__config.html#ga7">u_config_print</a>(u_config_t *c, <span class="keywordtype">int</span> lev);
00069 
00070 <span class="keywordtype">int</span> <a class="code" href="group__config.html#ga5">u_config_sort_children</a>(u_config_t *c, <span class="keywordtype">int</span>(*)(u_config_t**, u_config_t**));
00071 
00072 <span class="preprocessor">#ifdef __cplusplus</span>
00073 <span class="preprocessor"></span>}
00074 <span class="preprocessor">#endif</span>
00075 <span class="preprocessor"></span>
00076 <span class="preprocessor">#endif </span><span class="comment">/* !_U_CONFIG_H_ */</span>
</pre></div><hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/kl/cont/gb/html/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2008 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
