<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KLone: klog.c Source File</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>klog.c</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * Copyright (c) 2005, 2006 by KoanLogic s.r.l. &lt;http://www.koanlogic.com&gt;</span>
00003 <span class="comment"> * All rights reserved.</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * This file is part of KLone, and as such it is subject to the license stated</span>
00006 <span class="comment"> * in the LICENSE file which you have received as part of this distribution.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * $Id: klog.c,v 1.28 2009/01/27 12:27:21 tho Exp $</span>
00009 <span class="comment"> */</span>
00010 
00011 <span class="preprocessor">#include "klone_conf.h"</span>
00012 <span class="preprocessor">#include &lt;time.h&gt;</span>
00013 <span class="preprocessor">#include &lt;u/libu.h&gt;</span>
00014 <span class="preprocessor">#include &lt;klone/klog.h&gt;</span>
00015 <span class="preprocessor">#include &lt;klone/klogprv.h&gt;</span>
00016 
00017 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_args_new (klog_args_t **pka);
00018 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_args_check (klog_args_t *ka);
00019 
00020 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_type (<span class="keyword">const</span> <span class="keywordtype">char</span> *type);
00021 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_facility (klog_args_t *ka, <span class="keyword">const</span> <span class="keywordtype">char</span> *fac);
00022 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_threshold (<span class="keyword">const</span> <span class="keywordtype">char</span> *threshold);
00023 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_logopt (<span class="keyword">const</span> <span class="keywordtype">char</span> *options);
00024 
00025 
00037 <span class="keywordtype">int</span> klog_args (u_config_t *ls, klog_args_t **pka)
00038 {
00039     <span class="keyword">const</span> <span class="keywordtype">char</span> *cs;
00040     klog_args_t *ka = NULL;
00041 
00042     dbg_return_if (ls == NULL, ~0);
00043     dbg_return_if (pka == NULL, ~0);
00044 
00045     <span class="comment">/* here defaults are set */</span>
00046     dbg_err_if (klog_args_new(&amp;ka));
00047 
00048     <span class="comment">/* read in config values */</span>
00049     ka-&gt;type = klog_type(u_config_get_subkey_value(ls, <span class="stringliteral">"type"</span>));
00050 
00051     <span class="keywordflow">if</span> ((cs = u_config_get_subkey_value(ls, <span class="stringliteral">"ident"</span>)) != NULL)
00052         ka-&gt;ident = u_strdup(cs);
00053 
00054     ka-&gt;threshold = klog_threshold(u_config_get_subkey_value(ls, <span class="stringliteral">"threshold"</span>));
00055 
00056     <span class="keywordflow">if</span> ((cs = u_config_get_subkey_value(ls, <span class="stringliteral">"memory.limit"</span>)) != NULL)
00057         ka-&gt;mlimit = atoi(cs);
00058 
00059     <span class="keywordflow">if</span> ((cs = u_config_get_subkey_value(ls, <span class="stringliteral">"file.basename"</span>)) != NULL) 
00060         ka-&gt;fbasename = u_strdup(cs);
00061 
00062     <span class="keywordflow">if</span> ((cs = u_config_get_subkey_value(ls, <span class="stringliteral">"file.limit"</span>)) != NULL)
00063         ka-&gt;flimit = atoi(cs);
00064 
00065     <span class="keywordflow">if</span> ((cs = u_config_get_subkey_value(ls, <span class="stringliteral">"file.splits"</span>)) != NULL)
00066         ka-&gt;fsplits = atoi(cs);
00067 
00068 <span class="preprocessor">    #ifdef HAVE_SYSLOG</span>
00069 <span class="preprocessor"></span>    ka-&gt;sfacility = 
00070         klog_facility(ka, u_config_get_subkey_value(ls, <span class="stringliteral">"syslog.facility"</span>));
00071 
00072     ka-&gt;soptions = klog_logopt(u_config_get_subkey_value(ls, <span class="stringliteral">"syslog.options"</span>));
00073 <span class="preprocessor">    #endif</span>
00074 <span class="preprocessor"></span>
00075     dbg_return_if (klog_args_check(ka), ~0);
00076 
00077     *pka = ka;
00078     
00079     <span class="keywordflow">return</span> 0;
00080 err:
00081     <span class="keywordflow">if</span> (ka)
00082         klog_args_free(ka);
00083     <span class="keywordflow">return</span> ~0;
00084 }
00085 
00096 <span class="keywordtype">int</span> klog_open (klog_args_t *ka, klog_t **pkl)
00097 {
00098     <span class="keywordtype">int</span> rv;
00099     klog_t *kl = NULL;
00100 
00101     dbg_return_if (pkl == NULL, ~0);
00102     dbg_return_if (ka == NULL, ~0);
00103 
00104     <span class="comment">/* create a klog_t object: each per-type init will create and stick </span>
00105 <span class="comment">     * its klog_*_t obj */</span>
00106     dbg_err_if (klog_new(ka-&gt;type, ka-&gt;threshold, ka-&gt;ident, &amp;kl));
00107 
00108     <span class="keywordflow">switch</span> (ka-&gt;type)
00109     {
00110         <span class="keywordflow">case</span> KLOG_TYPE_MEM:
00111             rv = klog_open_mem(kl, ka-&gt;mlimit);
00112             <span class="keywordflow">break</span>;
00113         <span class="keywordflow">case</span> KLOG_TYPE_FILE:
00114             rv = klog_open_file(kl, ka-&gt;fbasename, ka-&gt;fsplits, ka-&gt;flimit);
00115             <span class="keywordflow">break</span>;
00116 <span class="preprocessor">        #ifdef HAVE_SYSLOG</span>
00117 <span class="preprocessor"></span>        <span class="keywordflow">case</span> KLOG_TYPE_SYSLOG:
00118             rv = klog_open_syslog(kl, ka-&gt;sfacility, ka-&gt;soptions);
00119             <span class="keywordflow">break</span>;
00120 <span class="preprocessor">        #endif</span>
00121 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
00122             <span class="keywordflow">return</span> ~0;
00123     }
00124 
00125     dbg_err_if (rv);
00126     *pkl = kl;
00127     
00128     <span class="keywordflow">return</span> 0;
00129 err:
00130     klog_close(kl);
00131     <span class="keywordflow">return</span> ~0;
00132 }
00133 
00149 <span class="keywordtype">int</span> klog (klog_t *kl, <span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)
00150 {
00151     va_list ap;
00152     <span class="keywordtype">int</span> rv = 0;
00153 
00154     dbg_return_if (kl == NULL, ~0);
00155     dbg_return_if (fmt == NULL, ~0);
00156     dbg_return_if (!IS_KLOG_TYPE(kl-&gt;type), ~0);
00157 
00158     va_start(ap, fmt);
00159     
00160     <span class="comment">/* get rid of spurious stuff */</span>
00161     dbg_goto_if (level &lt; KLOG_DEBUG || level &gt;= KLOG_LEVEL_UNKNOWN, end);
00162 
00163     <span class="comment">/* early filtering of msgs with level lower than threshold */</span>
00164     <span class="keywordflow">if</span> (level &lt; kl-&gt;threshold)
00165         <span class="keywordflow">goto</span> end;
00166     
00167     <span class="comment">/* if the log function is set call it with the supplied args */</span>
00168     <span class="keywordflow">if</span> (kl-&gt;cb_log)
00169         rv = kl-&gt;cb_log(kl, level, fmt, ap);
00170 
00171 end:
00172     va_end(ap);
00173 
00174     <span class="keywordflow">return</span> rv;
00175 }
00176 
00184 <span class="keywordtype">void</span> klog_close (klog_t *kl)
00185 {
00186     <span class="keywordflow">if</span> (kl == NULL) 
00187         <span class="keywordflow">return</span>;
00188     <span class="keywordflow">if</span> (!IS_KLOG_TYPE(kl-&gt;type)) 
00189         <span class="keywordflow">return</span>;
00190 
00191     <span class="comment">/* call private close function */</span>
00192     <span class="keywordflow">if</span> (kl-&gt;cb_close)
00193         kl-&gt;cb_close(kl);
00194 
00195     U_FREE(kl);
00196 
00197     <span class="keywordflow">return</span>;
00198 }
00199 
00212 <span class="keywordtype">int</span> klog_getln (klog_t *kl, size_t nth, <span class="keywordtype">char</span> ln[])
00213 {
00214     dbg_return_if (kl == NULL, ~0);
00215     dbg_return_if (!IS_KLOG_TYPE(kl-&gt;type), ~0);
00216 
00217     <span class="keywordflow">if</span> (kl-&gt;cb_getln)
00218         <span class="keywordflow">return</span> kl-&gt;cb_getln(kl, nth, ln);
00219     
00220     <span class="keywordflow">return</span> 0;
00221 }
00222 
00232 <span class="keywordtype">int</span> klog_clear (klog_t *kl)
00233 {
00234     dbg_return_if (kl == NULL, ~0);
00235     dbg_return_if (!IS_KLOG_TYPE(kl-&gt;type), ~0);
00236 
00237     <span class="keywordflow">if</span> (kl-&gt;cb_clear)
00238         <span class="keywordflow">return</span> kl-&gt;cb_clear(kl);
00239 
00240     <span class="keywordflow">return</span> ~0;
00241 }
00242 
00250 ssize_t klog_countln (klog_t *kl)
00251 {
00252     dbg_return_if (kl == NULL, -1);
00253     dbg_return_if (!IS_KLOG_TYPE(kl-&gt;type), ~0);
00254 
00255     <span class="keywordflow">if</span> (kl-&gt;cb_countln)
00256         <span class="keywordflow">return</span> kl-&gt;cb_countln(kl);
00257 
00258     <span class="keywordflow">return</span> -1;      <span class="comment">/* XXX should be 0 ? */</span>
00259 }
00260 
00272 <span class="keywordtype">int</span> klog_open_from_config(u_config_t *ls, klog_t **pkl)
00273 {
00274     klog_t *kl = NULL;
00275     klog_args_t *kargs = NULL;
00276 
00277     <span class="comment">/* parse config parameters */</span>
00278     dbg_err_if(klog_args(ls, &amp;kargs));
00279 
00280     <span class="comment">/* create a klog object */</span>
00281     dbg_err_if(klog_open(kargs, &amp;kl));
00282 
00283     klog_args_free(kargs);
00284     kargs = NULL;
00285 
00286     <span class="comment">/* stick it */</span>
00287     *pkl = kl;
00288 
00289     <span class="keywordflow">return</span> 0;
00290 err:
00291     <span class="keywordflow">if</span>(kargs)
00292         klog_args_free(kargs);
00293     <span class="keywordflow">if</span>(kl)
00294         klog_close(kl);
00295     <span class="keywordflow">return</span> ~0;
00296 }
00297 
00307 <span class="keywordtype">int</span> klog_flush (klog_t *kl)
00308 {
00309     dbg_return_if (kl == NULL, ~0);
00310     dbg_return_if (!IS_KLOG_TYPE(kl-&gt;type), ~0);
00311 
00312     <span class="comment">/* call private flush function */</span>
00313     <span class="keywordflow">if</span> (kl-&gt;cb_flush)
00314         <span class="keywordflow">return</span> kl-&gt;cb_flush(kl);
00315 
00316     <span class="keywordflow">return</span> 0;
00317 }
00318 
00319 
00320 <span class="comment">/* just for testing */</span>
00321 <span class="keywordtype">void</span> klog_args_print (FILE *fp, klog_args_t *ka)
00322 {
00323     dbg_ifb (ka == NULL) <span class="keywordflow">return</span>;
00324     dbg_ifb (fp == NULL) <span class="keywordflow">return</span>;
00325 
00326     fprintf(fp, <span class="stringliteral">"ka-&gt;type: \t %d\n"</span>, ka-&gt;type);
00327     fprintf(fp, <span class="stringliteral">"ka-&gt;ident: \t %s\n"</span>, ka-&gt;ident);
00328     fprintf(fp, <span class="stringliteral">"ka-&gt;threshold: \t %d\n"</span>, ka-&gt;threshold);
00329     fprintf(fp, <span class="stringliteral">"ka-&gt;mlimit: \t %zd\n"</span>, ka-&gt;mlimit);
00330     fprintf(fp, <span class="stringliteral">"ka-&gt;fbasename: \t %s\n"</span>, ka-&gt;fbasename);
00331     fprintf(fp, <span class="stringliteral">"ka-&gt;fsplits: \t %zd\n"</span>, ka-&gt;fsplits);
00332     fprintf(fp, <span class="stringliteral">"ka-&gt;flimit: \t %zd\n"</span>, ka-&gt;flimit);
00333     fprintf(fp, <span class="stringliteral">"ka-&gt;soptions: \t %d\n"</span>, ka-&gt;soptions);
00334     fprintf(fp, <span class="stringliteral">"ka-&gt;sfacility: \t %d\n"</span>, ka-&gt;sfacility);
00335 
00336     <span class="keywordflow">return</span>;
00337 }
00338 
00339 <span class="keywordtype">void</span> klog_args_free (klog_args_t *ka)
00340 {
00341     U_FREE(ka-&gt;ident);
00342     U_FREE(ka-&gt;fbasename);
00343     U_FREE(ka);
00344     <span class="keywordflow">return</span>;
00345 }
00346 
00347 <span class="comment">/* map type directive to the internal representation */</span>
00348 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_type (<span class="keyword">const</span> <span class="keywordtype">char</span> *type)
00349 {
00350     dbg_return_if (type == NULL, KLOG_TYPE_UNKNOWN);
00351 
00352     <span class="keywordflow">if</span> (!strcasecmp(type, <span class="stringliteral">"memory"</span>))
00353         <span class="keywordflow">return</span> KLOG_TYPE_MEM;
00354     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(type, <span class="stringliteral">"file"</span>))
00355         <span class="keywordflow">return</span> KLOG_TYPE_FILE;
00356     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(type, <span class="stringliteral">"syslog"</span>))
00357         <span class="keywordflow">return</span> KLOG_TYPE_SYSLOG;
00358     <span class="keywordflow">else</span>
00359         <span class="keywordflow">return</span> KLOG_TYPE_UNKNOWN;
00360 }
00361 
00362 <span class="comment">/* map threshold directive to the internal representation */</span>
00363 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_threshold (<span class="keyword">const</span> <span class="keywordtype">char</span> *threshold)
00364 {
00365     <span class="keywordtype">int</span> i;
00366 
00367     dbg_return_if (threshold == NULL, KLOG_LEVEL_UNKNOWN);
00368 
00369     <span class="keywordflow">for</span> (i = KLOG_DEBUG; i &lt;= KLOG_EMERG; i++)
00370         <span class="keywordflow">if</span> (!strcasecmp(threshold, kloglev[i]))
00371             <span class="keywordflow">return</span> i;
00372 
00373     warn(<span class="stringliteral">"bad threshold value: \'%s\'"</span>, threshold);
00374     <span class="keywordflow">return</span> KLOG_LEVEL_UNKNOWN;
00375 }
00376 
00377 <span class="preprocessor">#ifdef HAVE_SYSLOG</span>
00378 <span class="preprocessor"></span><span class="comment">/* map threshold directive to the internal representation */</span>
00379 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_logopt (<span class="keyword">const</span> <span class="keywordtype">char</span> *options)
00380 {
00381     <span class="keywordtype">char</span> *o2 = NULL;    <span class="comment">/* 'options' dupped for safe u_tokenize() */</span>
00382     <span class="keywordtype">int</span> i, logopt = 0;
00383     <span class="keyword">enum</span> { NOPTS = 4 };
00384     <span class="keywordtype">char</span> *optv[NOPTS + 1];
00385     
00386     dbg_return_if (options == NULL, 0);
00387     dbg_return_if ((o2 = u_strdup(options)) == NULL, 0);
00388 
00389     dbg_err_if (u_tokenize(o2, <span class="stringliteral">" \t"</span>, optv, NOPTS + 1));
00390     
00391     <span class="keywordflow">for</span> (i = 0; optv[i] != NULL; i++)
00392     {
00393         <span class="keywordflow">if</span> (!strcasecmp(optv[i], <span class="stringliteral">"LOG_CONS"</span>))
00394             logopt |= LOG_CONS;
00395         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(optv[i], <span class="stringliteral">"LOG_NDELAY"</span>))
00396             logopt |= LOG_NDELAY;
00397         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(optv[i], <span class="stringliteral">"LOG_PERROR"</span>))
00398             logopt |= LOG_PERROR;
00399         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(optv[i], <span class="stringliteral">"LOG_PID"</span>))
00400             logopt |= LOG_PID;
00401         <span class="keywordflow">else</span>
00402             warn(<span class="stringliteral">"bad log option: \'%s\'"</span>, optv[i]);
00403     }
00404 
00405     U_FREE(o2);
00406     <span class="keywordflow">return</span> logopt;
00407 
00408 err:
00409     U_FREE(o2);
00410     <span class="keywordflow">return</span> 0;
00411 }
00412 <span class="preprocessor">#endif</span>
00413 <span class="preprocessor"></span>
00414 <span class="comment">/* map LOG_LOCAL[0-7] strings into syslog(3) #define'd values */</span>
00415 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_facility (klog_args_t *ka, <span class="keyword">const</span> <span class="keywordtype">char</span> *fac)
00416 {
00417     dbg_goto_if (fac == NULL, end);
00418     nop_goto_if (ka-&gt;type != KLOG_TYPE_SYSLOG, end);
00419 
00420     <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL0"</span>)) 
00421         <span class="keywordflow">return</span> LOG_LOCAL0;
00422     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL1"</span>)) 
00423         <span class="keywordflow">return</span> LOG_LOCAL1;
00424     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL2"</span>)) 
00425         <span class="keywordflow">return</span> LOG_LOCAL2;
00426     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL3"</span>)) 
00427         <span class="keywordflow">return</span> LOG_LOCAL3;
00428     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL4"</span>)) 
00429         <span class="keywordflow">return</span> LOG_LOCAL4;
00430     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL5"</span>)) 
00431         <span class="keywordflow">return</span> LOG_LOCAL5;
00432     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL6"</span>)) 
00433         <span class="keywordflow">return</span> LOG_LOCAL6;
00434     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fac, <span class="stringliteral">"LOG_LOCAL7"</span>)) 
00435         <span class="keywordflow">return</span> LOG_LOCAL7;
00436     <span class="keywordflow">else</span>
00437         warn(<span class="stringliteral">"unknown facility value \'%s\'"</span>, fac);
00438         <span class="comment">/* fall through */</span>
00439 end:
00440     <span class="keywordflow">return</span> KLOG_FACILITY_UNKNOWN; 
00441 }
00442 
00443 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_args_new (klog_args_t **pka)
00444 {
00445     dbg_return_if (pka == NULL, ~0);
00446 
00447     *pka = u_zalloc(<span class="keyword">sizeof</span>(klog_args_t));
00448     dbg_return_if (*pka == NULL, ~0);
00449 
00450     <span class="keywordflow">return</span> 0;
00451 }
00452 
00453 <span class="keyword">static</span> <span class="keywordtype">int</span> klog_args_check (klog_args_t *ka)
00454 {
00455     dbg_return_if (ka == NULL, ~0);
00456 
00457     <span class="keywordflow">if</span> (ka-&gt;type == KLOG_TYPE_UNKNOWN)
00458         warn_err(<span class="stringliteral">"unknown log type"</span>);
00459 
00460     <span class="comment">/* do not filter if not specified or if a wrong value has been supplied */</span>
00461     <span class="keywordflow">if</span> (ka-&gt;threshold == KLOG_LEVEL_UNKNOWN)
00462     {
00463         dbg(<span class="stringliteral">"threshold unspecified: assuming lowest possible (DEBUG)"</span>);
00464         ka-&gt;threshold = KLOG_DEBUG;
00465     }
00466 
00467     <span class="keywordflow">switch</span> (ka-&gt;type)
00468     {
00469         <span class="keywordflow">case</span> KLOG_TYPE_MEM:
00470             <span class="keywordflow">if</span> (ka-&gt;mlimit == 0)
00471                 ka-&gt;mlimit = KLOG_MLIMIT_DFL;
00472             <span class="keywordflow">break</span>;
00473         <span class="keywordflow">case</span> KLOG_TYPE_FILE:
00474             <span class="keywordflow">if</span> (ka-&gt;fbasename == NULL)
00475                 warn_err(<span class="stringliteral">"log file path is mandatory !"</span>);
00476             <span class="keywordflow">if</span> (ka-&gt;fsplits == 0)
00477                 ka-&gt;fsplits =  KLOG_FSPLITS_DFL;
00478             <span class="keywordflow">if</span> (ka-&gt;flimit == 0)
00479                 ka-&gt;flimit = KLOG_FLIMIT_DFL;
00480             <span class="keywordflow">break</span>;
00481         <span class="keywordflow">case</span> KLOG_TYPE_SYSLOG:
00482             <span class="keywordflow">if</span> (ka-&gt;sfacility == KLOG_FACILITY_UNKNOWN)
00483             {
00484                 warn(<span class="stringliteral">"facility unspecified: defaults to LOG_LOCAL7"</span>);
00485                 ka-&gt;sfacility = LOG_LOCAL7;
00486             }
00487             <span class="keywordflow">break</span>;
00488         <span class="keywordflow">default</span>:
00489             warn_err(<span class="stringliteral">"what are you doing here ?"</span>);
00490     }
00491 
00492     <span class="keywordflow">return</span> 0;
00493 err:
00494     <span class="keywordflow">return</span> ~0;
00495 }
00496 
00497 
</pre></div>
    </div>

    <div id="footer">
        <p>Copyright &copy; 
    2005-2007 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
         | Valid <a
        href="http://jigsaw.w3.org/css-validator/">CSS</a> &amp; <a
        href="http://validator.w3.org/">XHTML</a> | powered by <a
        href="/klone/index.html">KLone</a> </p>
    </div>
</body>

</html>


