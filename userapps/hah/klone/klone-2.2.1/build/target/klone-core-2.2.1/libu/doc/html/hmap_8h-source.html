<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LibU: hmap.h Source File</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>hmap.h</h1><div class="fragment"><pre>00001 <span class="comment">/* </span>
00002 <span class="comment"> * Copyright (c) 2005-2008 by KoanLogic s.r.l. - All rights reserved.  </span>
00003 <span class="comment"> */</span>
00004 
00005 <span class="preprocessor">#ifndef _U_HMAP_H_</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define _U_HMAP_H_</span>
00007 <span class="preprocessor"></span>
00008 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00009 <span class="preprocessor">#include &lt;u/libu.h&gt;</span>
00010 
00011 <span class="preprocessor">#ifdef __cplusplus</span>
00012 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00016 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00017     U_HMAP_ERR_NONE = 0,
00018     U_HMAP_ERR_EXISTS,
00019     U_HMAP_ERR_FAIL
00020 } u_hmap_ret_t;
00021 
00023 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00024     U_HMAP_TYPE_CHAIN,      
00025     U_HMAP_TYPE_LINEAR      
00026 } u_hmap_type_t;
00027 
00029 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00030     U_HMAP_OPTS_OWNSDATA =          0x1,    
00031     U_HMAP_OPTS_NO_OVERWRITE =      0x2,    
00032     U_HMAP_OPTS_HASH_STRONG =       0x4     
00033 } u_hmap_options_t;
00034 
00036 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00037     U_HMAP_PCY_NONE = 1,    
00039     U_HMAP_PCY_FIFO,    
00040     U_HMAP_PCY_LRU,     
00041     U_HMAP_PCY_LFU      
00042 } u_hmap_pcy_type_t;
00043 
00044 <span class="keyword">typedef</span> <span class="keyword">struct </span>u_hmap_s u_hmap_t;     
00045 <span class="keyword">typedef</span> <span class="keyword">struct </span>u_hmap_pcy_s u_hmap_pcy_t;     
00046 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structu__hmap__opts__s.html">u_hmap_opts_s</a> u_hmap_opts_t;
00047 <span class="keyword">typedef</span> <span class="keyword">struct </span>u_hmap_q_s u_hmap_q_t;
00048 <span class="keyword">typedef</span> <span class="keyword">struct </span>u_hmap_o_s u_hmap_o_t;     
00049 
00050 <span class="comment">/* internal pre-declarations */</span>
00051 <span class="keyword">struct </span>u_hmap_o_s 
00052 {
00053     <span class="keywordtype">void</span> *key,
00054          *val;
00055 
00056     LIST_ENTRY(u_hmap_o_s) next;
00057 
00058     u_hmap_q_t *pqe; 
00059 };
00060 
<a name="l00062"></a><a class="code" href="structu__hmap__opts__s.html">00062</a> <span class="keyword">struct </span><a class="code" href="structu__hmap__opts__s.html">u_hmap_opts_s</a> {
00063 
<a name="l00064"></a><a class="code" href="structu__hmap__opts__s.html#o0">00064</a>     size_t size,            
00065            <a class="code" href="structu__hmap__opts__s.html#o1">max</a>;             
<a name="l00068"></a><a class="code" href="structu__hmap__opts__s.html#o2">00068</a>     u_hmap_type_t <a class="code" href="structu__hmap__opts__s.html#o2">type</a>;         
<a name="l00070"></a><a class="code" href="structu__hmap__opts__s.html#o3">00070</a>     u_hmap_pcy_type_t <a class="code" href="structu__hmap__opts__s.html#o3">policy</a>;   
<a name="l00072"></a><a class="code" href="structu__hmap__opts__s.html#o4">00072</a>     <span class="keywordtype">int</span> <a class="code" href="structu__hmap__opts__s.html#o4">options</a>;            
00076     size_t (*f_hash)(<span class="keywordtype">void</span> *key, size_t buckets);   
00078     int (*f_comp)(<span class="keywordtype">void</span> *k1, <span class="keywordtype">void</span> *k2);   
00080     void (*f_free)(u_hmap_o_t *obj);   
00082     u_string_t *(*f_str)(u_hmap_o_t *obj);   
00083 };
00084 
00085 
00086 <span class="comment">/* u_hmap_* */</span>
00087 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__hmap.html#ga19">u_hmap_strerror</a> (u_hmap_ret_t);
00088 
00089 <span class="comment">/* u_hmap_t */</span>
00090 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga20">u_hmap_new</a> (u_hmap_opts_t *opts, u_hmap_t **hmap);
00091 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga25">u_hmap_put</a> (u_hmap_t *hmap, u_hmap_o_t *obj, u_hmap_o_t **old);
00092 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga26">u_hmap_get</a> (u_hmap_t *hmap, <span class="keywordtype">void</span> *key, u_hmap_o_t **obj);
00093 <span class="keywordtype">int</span> u_hmap_del (u_hmap_t *hmap, <span class="keywordtype">void</span> *key, u_hmap_o_t **obj);
00094 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga21">u_hmap_copy</a> (u_hmap_t *to, u_hmap_t *from);
00095 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga29">u_hmap_free</a> (u_hmap_t *hmap);
00096 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga27">u_hmap_foreach</a> (u_hmap_t *hmap, <span class="keywordtype">int</span> f(<span class="keywordtype">void</span> *val));
00097 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga28">u_hmap_foreach_keyval</a> (u_hmap_t *hmap, <span class="keywordtype">int</span> f(<span class="keywordtype">void</span> *key, <span class="keywordtype">void</span> *val));
00098 
00099 <span class="comment">/* u_hmap_o_t */</span>
00100 u_hmap_o_t *<a class="code" href="group__hmap.html#ga35">u_hmap_o_new</a> (<span class="keywordtype">void</span> *key, <span class="keywordtype">void</span> *val);
00101 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga36">u_hmap_o_free</a> (u_hmap_o_t *obj);
00102 
00103 <span class="comment">/* u_hmap_opts_t */</span>
00104 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga30">u_hmap_opts_new</a> (u_hmap_opts_t **opts);
00105 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga32">u_hmap_opts_init</a> (u_hmap_opts_t *opts);
00106 <span class="keywordtype">int</span> <a class="code" href="group__hmap.html#ga31">u_hmap_opts_copy</a> (u_hmap_opts_t *to, u_hmap_opts_t *from);
00107 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga33">u_hmap_opts_free</a> (u_hmap_opts_t *opts);
00108 
00109 <span class="comment">/* testing */</span>
00110 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga22">u_hmap_dbg</a> (u_hmap_t *hmap);
00111 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga34">u_hmap_opts_dbg</a> (u_hmap_opts_t *opts);
00112 <span class="keywordtype">void</span> <a class="code" href="group__hmap.html#ga24">u_hmap_pcy_dbg</a> (u_hmap_t *hmap);
00113 
00114 
00115 <span class="preprocessor">#ifdef __cplusplus</span>
00116 <span class="preprocessor"></span>}
00117 <span class="preprocessor">#endif</span>
00118 <span class="preprocessor"></span>
00119 <span class="preprocessor">#endif </span><span class="comment">/* !_U_HMAP_H_ */</span>
</pre></div><hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/kl/cont/gb/html/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2008 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
