<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LibU: log.h Source File</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>log.h</h1><div class="fragment"><pre>00001 <span class="comment">/* </span>
00002 <span class="comment"> * Copyright (c) 2005-2008 by KoanLogic s.r.l. - All rights reserved.  </span>
00003 <span class="comment"> */</span>
00004 
00005 <span class="preprocessor">#ifndef _U_LOG_H_</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define _U_LOG_H_</span>
00007 <span class="preprocessor"></span>
00008 <span class="preprocessor">#include &lt;u/libu_conf.h&gt;</span>
00009 
00010 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00011 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00012 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00013 
00014 <span class="preprocessor">#include &lt;u/missing.h&gt;</span>
00015 <span class="preprocessor">#include &lt;u/toolbox/logprv.h&gt;</span>
00016 
00017 <span class="preprocessor">#ifdef __cplusplus</span>
00018 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00019 <span class="preprocessor">#endif</span>
00020 <span class="preprocessor"></span>
00054 <span class="comment">/* messages longer then U_MAX_LOG_LENGTH will be silently discarded */</span>
00055 <span class="keyword">enum</span> { U_MAX_LOG_LENGTH  = 1024 };
00056 
<a name="l00065"></a><a class="code" href="group__log.html#ga0">00065</a> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="group__log.html#ga0">facility</a>;
00066 
<a name="l00068"></a><a class="code" href="group__log.html#ga1">00068</a> <span class="keyword">typedef</span> int (*<a class="code" href="group__log.html#ga1">u_log_hook_t</a>)(<span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *str); 
00069 
<a name="l00071"></a><a class="code" href="group__log.html#ga2">00071</a> <span class="keyword">typedef</span> int (*<a class="code" href="group__log.html#ga2">u_log_lock_t</a>)(<span class="keywordtype">void</span> *arg);
00072 
<a name="l00074"></a><a class="code" href="group__log.html#ga3">00074</a> <span class="keyword">typedef</span> int (*<a class="code" href="group__log.html#ga3">u_log_unlock_t</a>)(<span class="keywordtype">void</span> *arg);
00075 
00092 <span class="keywordtype">int</span> <a class="code" href="group__log.html#ga13">u_log_set_lock</a>(<a class="code" href="group__log.html#ga2">u_log_lock_t</a> f, <span class="keywordtype">void</span> *arg);
00093 
00106 <span class="keywordtype">int</span> <a class="code" href="group__log.html#ga14">u_log_set_unlock</a>(<a class="code" href="group__log.html#ga3">u_log_unlock_t</a> f, <span class="keywordtype">void</span> *arg);
00107 
00125 <span class="keywordtype">int</span> <a class="code" href="group__log.html#ga19">u_log_set_hook</a>(<a class="code" href="group__log.html#ga1">u_log_hook_t</a> hook, <span class="keywordtype">void</span> *arg, <a class="code" href="group__log.html#ga1">u_log_hook_t</a> *old, <span class="keywordtype">void</span>**parg);
00126 
<a name="l00137"></a><a class="code" href="group__log.html#ga10">00137</a> <span class="preprocessor">#define u_log_die(ecode, facility, flags, err, ...)               \</span>
00138 <span class="preprocessor">    do {                                                        \</span>
00139 <span class="preprocessor">        u_log_write(facility, LOG_CRIT, flags, err, __VA_ARGS__); \</span>
00140 <span class="preprocessor">        exit(ecode);                                            \</span>
00141 <span class="preprocessor">    } while(0)</span>
00142 <span class="preprocessor"></span>
<a name="l00152"></a><a class="code" href="group__log.html#ga11">00152</a> <span class="preprocessor">#define u_log_emerg(facility, flags, err, ...) \</span>
00153 <span class="preprocessor">    u_log_write(facility, LOG_EMERG, flags, err, __VA_ARGS__)</span>
00154 <span class="preprocessor"></span>
<a name="l00164"></a><a class="code" href="group__log.html#ga12">00164</a> <span class="preprocessor">#define u_log_alert(facility, flags, err, ...) \</span>
00165 <span class="preprocessor">    u_log_write(facility, LOG_ALERT, flags, err, __VA_ARGS__)</span>
00166 <span class="preprocessor"></span>
<a name="l00176"></a><a class="code" href="group__log.html#ga13">00176</a> <span class="preprocessor">#define u_log_critical(facility, flags, err, ...) \</span>
00177 <span class="preprocessor">    u_log_write(facility, LOG_CRIT, flags, err, __VA_ARGS__)</span>
00178 <span class="preprocessor"></span>
<a name="l00188"></a><a class="code" href="group__log.html#ga14">00188</a> <span class="preprocessor">#define u_log_error(facility, flags, err, ...) \</span>
00189 <span class="preprocessor">    u_log_write(facility, LOG_ERR, flags, err, __VA_ARGS__)</span>
00190 <span class="preprocessor"></span>
<a name="l00200"></a><a class="code" href="group__log.html#ga15">00200</a> <span class="preprocessor">#define u_log_warning(facility, flags, err, ...) \</span>
00201 <span class="preprocessor">    u_log_write(facility, LOG_WARNING, flags, err, __VA_ARGS__)</span>
00202 <span class="preprocessor"></span>
<a name="l00212"></a><a class="code" href="group__log.html#ga16">00212</a> <span class="preprocessor">#define u_log_notice(facility, flags, err, ...) \</span>
00213 <span class="preprocessor">    u_log_write(facility, LOG_NOTICE, flags, err, __VA_ARGS__)</span>
00214 <span class="preprocessor"></span>
<a name="l00224"></a><a class="code" href="group__log.html#ga17">00224</a> <span class="preprocessor">#define u_log_info(facility, flags, err, ...) \</span>
00225 <span class="preprocessor">    u_log_write(facility, LOG_INFO, flags, err, __VA_ARGS__)</span>
00226 <span class="preprocessor"></span>
<a name="l00236"></a><a class="code" href="group__log.html#ga18">00236</a> <span class="preprocessor">#define u_log_debug(facility, flags, err, ...) \</span>
00237 <span class="preprocessor">    u_log_write(facility, LOG_DEBUG, flags, err, __VA_ARGS__)</span>
00238 <span class="preprocessor"></span>
<a name="l00240"></a><a class="code" href="group__log.html#ga19">00240</a> <span class="preprocessor">#define die(ecode, ...) u_log_die(ecode, facility, 1, 0, __VA_ARGS__)</span>
00241 <span class="preprocessor"></span>
<a name="l00243"></a><a class="code" href="group__log.html#ga20">00243</a> <span class="preprocessor">#define die_if(expr) if(expr) die(EXIT_FAILURE, #expr)</span>
00244 <span class="preprocessor"></span>
<a name="l00246"></a><a class="code" href="group__log.html#ga21">00246</a> <span class="preprocessor">#define emerg_( err, ...) u_log_emerg(facility, 1, err, __VA_ARGS__)</span>
00247 <span class="preprocessor"></span>
<a name="l00249"></a><a class="code" href="group__log.html#ga22">00249</a> <span class="preprocessor">#define alert_( err, ...) u_log_alert(facility, 1, err, __VA_ARGS__)</span>
00250 <span class="preprocessor"></span>
<a name="l00252"></a><a class="code" href="group__log.html#ga23">00252</a> <span class="preprocessor">#define crit_( err, ...) u_log_critical(facility, 1, err, __VA_ARGS__)</span>
00253 <span class="preprocessor"></span>
<a name="l00255"></a><a class="code" href="group__log.html#ga24">00255</a> <span class="preprocessor">#define err_( err, ...) u_log_error(facility, 1, err, __VA_ARGS__)</span>
00256 <span class="preprocessor"></span>
<a name="l00258"></a><a class="code" href="group__log.html#ga25">00258</a> <span class="preprocessor">#define warn_( err, ...) u_log_warning(facility, 1, err, __VA_ARGS__)</span>
00259 <span class="preprocessor"></span>
<a name="l00261"></a><a class="code" href="group__log.html#ga26">00261</a> <span class="preprocessor">#define notice_( err, ...) u_log_notice(facility, 1, err, __VA_ARGS__)</span>
00262 <span class="preprocessor"></span>
<a name="l00264"></a><a class="code" href="group__log.html#ga27">00264</a> <span class="preprocessor">#define info_( err, ...) u_log_info(facility, 0, err, __VA_ARGS__)</span>
00265 <span class="preprocessor"></span>
<a name="l00267"></a><a class="code" href="group__log.html#ga28">00267</a> <span class="preprocessor">#define dbg_( err, ...) u_log_debug(facility, 1, err, __VA_ARGS__)</span>
00268 <span class="preprocessor"></span>
<a name="l00270"></a><a class="code" href="group__log.html#ga29">00270</a> <span class="preprocessor">#define con_( err, ...) u_console_write( err, __VA_ARGS__)</span>
00271 <span class="preprocessor"></span>
00287 <span class="keywordtype">int</span> <a class="code" href="group__log.html#ga22">u_strerror_r</a>(<span class="keywordtype">int</span> err, <span class="keywordtype">char</span> *buf, size_t size);
00288 
00293 <span class="preprocessor">#ifdef __cplusplus</span>
00294 <span class="preprocessor"></span>}
00295 <span class="preprocessor">#endif</span>
00296 <span class="preprocessor"></span>
00297 <span class="preprocessor">#endif </span><span class="comment">/* !_U_LOG_H_ */</span>
</pre></div><hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/kl/cont/gb/html/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2008 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
