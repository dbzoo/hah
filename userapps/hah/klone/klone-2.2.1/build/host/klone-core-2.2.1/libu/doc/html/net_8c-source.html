<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LibU: net.c Source File</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>net.c</h1><div class="fragment"><pre>00001 <span class="comment">/* </span>
00002 <span class="comment"> * Copyright (c) 2005-2008 by KoanLogic s.r.l. - All rights reserved.  </span>
00003 <span class="comment"> */</span>
00004 
00005 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00006 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00007 <span class="preprocessor">#include &lt;errno.h&gt;</span>
00008 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
00009 <span class="preprocessor">#include &lt;string.h&gt;</span>
00010 
00011 <span class="preprocessor">#include &lt;toolbox/net.h&gt;</span>
00012 <span class="preprocessor">#include &lt;toolbox/uri.h&gt;</span>
00013 <span class="preprocessor">#include &lt;toolbox/carpal.h&gt;</span>
00014 <span class="preprocessor">#include &lt;toolbox/misc.h&gt;</span>
00015 <span class="preprocessor">#include &lt;toolbox/memory.h&gt;</span>
00016 <span class="preprocessor">#include &lt;u/missing.h&gt;</span>
00017 
00018 <span class="keyword">static</span> <span class="keywordtype">int</span> u_net_sock_tcp4 (u_net_addr_t *a,  <span class="keywordtype">int</span> mode);
00019 <span class="keyword">static</span> <span class="keywordtype">int</span> u_net_sock_tcp6 (u_net_addr_t *a,  <span class="keywordtype">int</span> mode);
00020 
<a name="l00052"></a><a class="code" href="group__net.html#ga0">00052</a> <span class="keywordtype">int</span> <a class="code" href="group__net.html#ga0">u_net_sock</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <span class="keywordtype">int</span> mode)
00053 {
00054     <span class="keywordtype">int</span> sd = -1;
00055     u_net_addr_t *addr = NULL;
00056 
00057     dbg_return_if (uri == NULL, -1);
00058     dbg_return_if (mode != U_NET_SSOCK &amp;&amp; mode != U_NET_CSOCK, -1);
00059     
00060     dbg_err_if (u_net_uri2addr(uri, &amp;addr));
00061 
00062     <span class="keywordflow">switch</span> (addr-&gt;type)
00063     {
00064         <span class="keywordflow">case</span> U_NET_TCP4:
00065 <span class="preprocessor">#ifndef NO_IPV6</span>
00066 <span class="preprocessor"></span>        <span class="keywordflow">case</span> U_NET_TCP6:
00067 <span class="preprocessor">#endif</span>
00068 <span class="preprocessor"></span>            sd = u_net_sock_tcp(addr, mode);
00069             <span class="keywordflow">break</span>;
00070 <span class="preprocessor">#ifndef NO_UNIXSOCK</span>
00071 <span class="preprocessor"></span>        <span class="keywordflow">case</span> U_NET_UNIX:
00072             sd = u_net_sock_unix(addr, mode);
00073             <span class="keywordflow">break</span>;
00074 <span class="preprocessor">#endif </span><span class="comment">/* NO_UNIXSOCK */</span>
00075         <span class="keywordflow">case</span> U_NET_UDP4:
00076         <span class="keywordflow">case</span> U_NET_UDP6:
00077         <span class="keywordflow">default</span>:
00078            dbg_err(<span class="stringliteral">"access method not implemented"</span>);
00079     }
00080 
00081     dbg_if (sd == -1);
00082     u_net_addr_free(addr);
00083     <span class="keywordflow">return</span> sd;
00084 
00085 err:
00086     <span class="keywordflow">if</span> (addr)
00087         u_net_addr_free(addr);
00088     <span class="keywordflow">return</span> -1;
00089 }
00090 
00091 <span class="keyword">static</span> <span class="keywordtype">int</span> u_net_sock_tcp4 (u_net_addr_t *a,  <span class="keywordtype">int</span> mode)
00092 {
00093     dbg_return_if (a == NULL, -1);
00094     dbg_return_if (a-&gt;type != U_NET_TCP4 &amp;&amp; a-&gt;type != U_NET_TCP6, -1);
00095 
00096     <span class="keywordflow">switch</span> (mode)
00097     {
00098         <span class="keywordflow">case</span> U_NET_CSOCK:
00099             <span class="keywordflow">return</span> u_net_tcp4_csock(&amp;a-&gt;sa.sin);
00100         <span class="keywordflow">case</span> U_NET_SSOCK:
00101             <span class="keywordflow">return</span> u_net_tcp4_ssock(&amp;a-&gt;sa.sin, 1, U_NET_BACKLOG);
00102         <span class="keywordflow">default</span>:
00103             <span class="comment">//warn("unknown socket mode");</span>
00104             <span class="keywordflow">return</span> -1;
00105     }
00106 }
00107 
00108 <span class="preprocessor">#ifndef NO_IPV6</span>
00109 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> u_net_sock_tcp6 (u_net_addr_t *a,  <span class="keywordtype">int</span> mode)
00110 {
00111     dbg_return_if (a == NULL, -1);
00112     dbg_return_if (a-&gt;type != U_NET_TCP4 &amp;&amp; a-&gt;type != U_NET_TCP6, -1);
00113 
00114     <span class="keywordflow">switch</span> (mode)
00115     {
00116         <span class="keywordflow">case</span> U_NET_CSOCK:
00117                 <span class="keywordflow">return</span> u_net_tcp6_csock(&amp;a-&gt;sa.sin6);
00118         <span class="keywordflow">case</span> U_NET_SSOCK:
00119                 <span class="keywordflow">return</span> u_net_tcp6_ssock(&amp;a-&gt;sa.sin6, 1, U_NET_BACKLOG);
00120         <span class="keywordflow">default</span>:
00121             warn(<span class="stringliteral">"unknown socket mode"</span>);
00122             <span class="keywordflow">return</span> -1;
00123     }
00124 }
00125 <span class="preprocessor">#endif</span>
00126 <span class="preprocessor"></span>
00127 <span class="keywordtype">int</span> u_net_sock_tcp (u_net_addr_t *a,  <span class="keywordtype">int</span> mode)
00128 {
00129     dbg_return_if (a == NULL, -1);
00130     dbg_return_if (a-&gt;type != U_NET_TCP4 &amp;&amp; a-&gt;type != U_NET_TCP6, -1);
00131 
00132     <span class="keywordflow">switch</span> (a-&gt;type)
00133     {
00134         <span class="keywordflow">case</span> U_NET_TCP4:
00135             <span class="keywordflow">return</span> u_net_sock_tcp4(a, mode);
00136 <span class="preprocessor">#ifndef NO_IPV6</span>
00137 <span class="preprocessor"></span>        <span class="keywordflow">case</span> U_NET_TCP6:
00138             <span class="keywordflow">return</span> u_net_sock_tcp6(a, mode);
00139 <span class="preprocessor">#endif</span>
00140 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
00141             warn(<span class="stringliteral">"unknown or unsupported socket type"</span>);
00142             <span class="keywordflow">return</span> -1;
00143     }
00144 }
00145 
00146 <span class="preprocessor">#ifndef NO_UNIXSOCK</span>
00147 <span class="preprocessor"></span><span class="keywordtype">int</span> u_net_sock_unix (u_net_addr_t *a, <span class="keywordtype">int</span> mode)
00148 {
00149     dbg_return_if (a == NULL, -1);
00150     dbg_return_if (a-&gt;type != U_NET_UNIX, -1);
00151 
00152     <span class="keywordflow">switch</span> (mode)
00153     {
00154         <span class="keywordflow">case</span> U_NET_CSOCK:
00155             <span class="keywordflow">return</span> u_net_unix_csock(&amp;a-&gt;sa.sun);
00156         <span class="keywordflow">case</span> U_NET_SSOCK:
00157             <span class="keywordflow">return</span> u_net_unix_ssock(&amp;a-&gt;sa.sun, U_NET_BACKLOG);
00158         <span class="keywordflow">default</span>:
00159             warn(<span class="stringliteral">"unknown socket mode"</span>);
00160             <span class="keywordflow">return</span> -1;
00161     }
00162 }
00163 
00164 <span class="keywordtype">int</span> u_net_unix_csock (<span class="keyword">struct</span> sockaddr_un *sad)
00165 {
00166     <span class="keywordtype">int</span> rv, csd = -1;
00167 
00168     dbg_return_if (sad == NULL, -1);
00169 
00170     csd = socket(AF_UNIX, SOCK_STREAM, 0); 
00171     dbg_err_if (csd == -1);
00172 
00173     rv = connect(csd, (<span class="keyword">struct</span> sockaddr *) sad, <span class="keyword">sizeof</span> *sad);
00174     dbg_err_if (rv == -1);
00175 
00176     <span class="keywordflow">return</span> csd;
00177 err:
00178     dbg_strerror(errno);
00179     U_CLOSE(csd);
00180     <span class="keywordflow">return</span> -1;
00181 }
00182 
00183 <span class="keywordtype">int</span> u_net_unix_ssock (<span class="keyword">struct</span> sockaddr_un *sad, <span class="keywordtype">int</span> backlog)
00184 {
00185     <span class="keywordtype">int</span> rv, lsd = -1;
00186 
00187     dbg_return_if (sad == NULL, -1);
00188 
00189     rv = unlink(sad-&gt;sun_path);
00190     dbg_err_if (rv == -1 &amp;&amp; errno != ENOENT);
00191 
00192     lsd = socket(AF_UNIX, SOCK_STREAM, 0);
00193     dbg_err_if (lsd == -1);
00194 
00195     rv = bind(lsd, (<span class="keyword">struct</span> sockaddr *) sad, <span class="keyword">sizeof</span> *sad);
00196     dbg_err_if (rv == -1);
00197 
00198     rv = listen(lsd, backlog);
00199     dbg_err_if (rv == -1);
00200 
00201     <span class="keywordflow">return</span> lsd;
00202 err:
00203     dbg_strerror(errno);
00204     U_CLOSE(lsd);
00205     <span class="keywordflow">return</span> -1;    
00206 }
00207 
00208 <span class="preprocessor">#endif </span><span class="comment">/* NO_UNIXSOCK */</span>
00209 
00210 <span class="keywordtype">int</span> u_net_sock_udp (u_net_addr_t *a, <span class="keywordtype">int</span> mode)
00211 {
00212     dbg_return_if (a == NULL, -1);
00213     dbg_return_if (a-&gt;type != U_NET_UDP4 &amp;&amp; a-&gt;type != U_NET_UDP6, -1);
00214     <span class="keywordflow">switch</span> (mode) { <span class="keywordflow">default</span>: <span class="keywordflow">break</span>; }  <span class="comment">/* TODO */</span>
00215     <span class="keywordflow">return</span> -1;
00216 }
00217 
00218 <span class="preprocessor">#ifndef NO_IPV6</span>
00219 <span class="preprocessor"></span><span class="keywordtype">int</span> u_net_tcp6_ssock (<span class="keyword">struct</span> sockaddr_in6 *sad, <span class="keywordtype">int</span> reuse, <span class="keywordtype">int</span> backlog)
00220 {
00221     <span class="keywordtype">int</span> rv, lsd = -1;
00222 <span class="preprocessor">#ifdef HAVE_SETSOCKOPT</span>
00223 <span class="preprocessor"></span>    <span class="keywordtype">int</span> on = reuse ? 1 : 0;
00224 <span class="preprocessor">#else</span>
00225 <span class="preprocessor"></span>    u_unused_args(reuse);
00226 <span class="preprocessor">#endif </span>
00227 <span class="preprocessor"></span>
00228     dbg_return_if (sad == NULL, -1);
00229     
00230     lsd = socket(AF_INET6, SOCK_STREAM, 0);
00231     dbg_err_if (lsd == -1);
00232 
00233 <span class="preprocessor">#ifdef HAVE_SETSOCKOPT</span>
00234 <span class="preprocessor"></span>    rv = setsockopt(lsd, SOL_SOCKET, SO_REUSEADDR, &amp;on, <span class="keyword">sizeof</span> on);
00235     dbg_err_if (rv == -1);
00236 <span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span>
00238     rv = bind(lsd, (<span class="keyword">struct</span> sockaddr *) sad, <span class="keyword">sizeof</span> *sad);
00239     dbg_err_if (rv == -1);
00240 
00241     rv = listen(lsd, backlog);
00242     dbg_err_if (rv == -1);
00243 
00244     <span class="keywordflow">return</span> lsd;
00245 
00246 err:
00247     dbg_strerror(errno);
00248     U_CLOSE(lsd);
00249     <span class="keywordflow">return</span> -1;
00250 }
00251 
00252 <span class="keywordtype">int</span> u_net_tcp6_csock (<span class="keyword">struct</span> sockaddr_in6 *sad)
00253 {
00254     <span class="keywordtype">int</span> csd = -1;
00255     <span class="keywordtype">int</span> rv;
00256 
00257     dbg_return_if (sad == NULL, -1);
00258 
00259     csd = socket(AF_INET6, SOCK_STREAM, 0);
00260     dbg_err_if (csd == -1);
00261 
00262     rv = connect(csd, (<span class="keyword">struct</span> sockaddr *) sad, <span class="keyword">sizeof</span> *sad);
00263     dbg_err_if (rv == -1);
00264 
00265     <span class="keywordflow">return</span> csd;
00266 
00267 err:
00268     dbg_strerror(errno);
00269     U_CLOSE(csd);
00270     <span class="keywordflow">return</span> -1;
00271 }
00272 <span class="preprocessor">#endif </span><span class="comment">/* NO_IPV6 */</span>
00273 
00274 <span class="keywordtype">int</span> u_net_tcp4_ssock (<span class="keyword">struct</span> sockaddr_in *sad, <span class="keywordtype">int</span> reuse, <span class="keywordtype">int</span> backlog)
00275 {
00276     <span class="keywordtype">int</span> rv, lsd = -1;
00277 <span class="preprocessor">#ifdef HAVE_SETSOCKOPT</span>
00278 <span class="preprocessor"></span>    <span class="keywordtype">int</span> on = reuse ? 1 : 0;
00279 <span class="preprocessor">#else</span>
00280 <span class="preprocessor"></span>    u_unused_args(reuse);
00281 <span class="preprocessor">#endif</span>
00282 <span class="preprocessor"></span>
00283     dbg_return_if (sad == NULL, -1);
00284     
00285     lsd = socket(AF_INET, SOCK_STREAM, 0);
00286     dbg_err_if (lsd == -1);
00287 
00288 <span class="preprocessor">#ifdef HAVE_SETSOCKOPT</span>
00289 <span class="preprocessor"></span>    rv = setsockopt(lsd, SOL_SOCKET, SO_REUSEADDR, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)&amp;on, <span class="keyword">sizeof</span> on);
00290     dbg_err_if (rv == -1);
00291 <span class="preprocessor">#endif</span>
00292 <span class="preprocessor"></span>
00293     rv = bind(lsd, (<span class="keyword">struct</span> sockaddr *) sad, <span class="keyword">sizeof</span> *sad);
00294     dbg_err_if (rv == -1);
00295 
00296     rv = listen(lsd, backlog);
00297     dbg_err_if (rv == -1);
00298 
00299     <span class="keywordflow">return</span> lsd;
00300 
00301 err:
00302     dbg_strerror(errno);
00303     U_CLOSE(lsd);
00304     <span class="keywordflow">return</span> -1;
00305 }
00306 
00307 <span class="keywordtype">int</span> u_net_tcp4_csock (<span class="keyword">struct</span> sockaddr_in *sad)
00308 {
00309     <span class="keywordtype">int</span> csd = -1;
00310 
00311     dbg_return_if (sad == NULL, -1);
00312 
00313     csd = socket(AF_INET, SOCK_STREAM, 0);
00314     dbg_err_if (csd == -1);
00315 
00316     dbg_err_if (connect(csd, (<span class="keyword">struct</span> sockaddr *) sad, <span class="keyword">sizeof</span> *sad) == -1);
00317 
00318     <span class="keywordflow">return</span> csd;
00319 
00320 err:
00321     dbg_strerror(errno);
00322     U_CLOSE(csd);
00323     <span class="keywordflow">return</span> -1;
00324 }
00325 
00326 <span class="keywordtype">int</span> u_net_uri2addr (<span class="keyword">const</span> <span class="keywordtype">char</span> *uri, u_net_addr_t **pa)
00327 {
00328     u_uri_t *u = NULL;
00329     u_net_addr_t *a = NULL;
00330     
00331     dbg_return_if (uri == NULL, ~0);
00332     dbg_return_if (pa == NULL, ~0);
00333 
00334     *pa = NULL;
00335     
00336     dbg_err_if (<a class="code" href="group__uri.html#ga5">u_uri_parse</a>(uri, &amp;u));
00337 
00338     <span class="keywordflow">if</span> (!strcasecmp(u-&gt;scheme, <span class="stringliteral">"tcp4"</span>))
00339     {
00340         dbg_err_if (u_net_addr_new(U_NET_TCP4, &amp;a));
00341         dbg_err_if (u_net_uri2sin(u, &amp;a-&gt;sa.sin));
00342     }
00343 <span class="preprocessor">#ifndef NO_UNIXSOCK</span>
00344 <span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(u-&gt;scheme, <span class="stringliteral">"unix"</span>))
00345     {    
00346         dbg_err_if (u_net_addr_new(U_NET_UNIX, &amp;a));
00347         dbg_err_if (u_net_uri2sun(uri, &amp;a-&gt;sa.sun));
00348     }
00349 <span class="preprocessor">#endif </span><span class="comment">/* NO_UNIXSOCK */</span>    
00350     <span class="keywordflow">else</span> <span class="comment">/* tcp6, udp[46] unsupported */</span>
00351         dbg_err(<span class="stringliteral">"unsupported URI scheme: %s"</span>, u-&gt;scheme); 
00352     
00353     *pa = a;
00354     <a class="code" href="group__uri.html#ga4">u_uri_free</a>(u);
00355     <span class="keywordflow">return</span> 0;
00356 err:
00357     <span class="keywordflow">if</span> (a) u_net_addr_free(a);
00358     <span class="keywordflow">if</span> (u) <a class="code" href="group__uri.html#ga4">u_uri_free</a>(u);
00359     <span class="keywordflow">return</span> ~0;
00360 }
00361 
00362 <span class="preprocessor">#ifndef NO_UNIXSOCK</span>
00363 <span class="preprocessor"></span><span class="keywordtype">int</span> u_net_uri2sun (<span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <span class="keyword">struct</span> sockaddr_un *sad)
00364 {
00365     dbg_return_if (uri == NULL, ~0);
00366     dbg_return_if (sad == NULL, ~0);
00367 
00368     sad-&gt;sun_family = AF_UNIX;
00369     strlcpy(sad-&gt;sun_path, uri + strlen(<span class="stringliteral">"unix://"</span>), <span class="keyword">sizeof</span> sad-&gt;sun_path);
00370     
00371     <span class="keywordflow">return</span> 0;
00372 }
00373 <span class="preprocessor">#endif </span><span class="comment">/* !NO_UNIXSOCK */</span>
00374 
00375 <span class="keywordtype">int</span> u_net_addr_new (<span class="keywordtype">int</span> type, u_net_addr_t **pa)
00376 {
00377     u_net_addr_t *a = NULL;
00378 
00379     dbg_return_if (pa == NULL, ~0);
00380     dbg_return_if (type &lt;= U_NET_TYPE_MIN || type &gt;= U_NET_TYPE_MAX, ~0);
00381 
00382     a = <a class="code" href="group__alloc.html#ga6">u_zalloc</a>(<span class="keyword">sizeof</span>(u_net_addr_t));
00383     dbg_err_if (a == NULL);
00384     a-&gt;type = type;
00385     *pa = a;
00386 
00387     <span class="keywordflow">return</span> 0;
00388 
00389 err:
00390     <span class="keywordflow">if</span> (a) u_net_addr_free(a);
00391     <span class="keywordflow">return</span> ~0;
00392 }
00393 
00394 <span class="keywordtype">void</span> u_net_addr_free (u_net_addr_t *a)
00395 {
00396     U_FREE(a);
00397     <span class="keywordflow">return</span>;
00398 }
00399    
00400 <span class="comment">/* translate u_uri_t into struct sockaddr_in */</span>
00401 <span class="keywordtype">int</span> u_net_uri2sin (u_uri_t *uri, <span class="keyword">struct</span> sockaddr_in *sad)
00402 {
00403     <span class="keyword">struct </span>hostent *hp = NULL;
00404     in_addr_t saddr;
00405 
00406     dbg_return_if (uri == NULL, ~0);
00407     dbg_return_if (sad == NULL, ~0);
00408 
00409     memset((<span class="keywordtype">char</span> *) sad, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));
00410     sad-&gt;sin_port = htons(uri-&gt;port);
00411     sad-&gt;sin_family = AF_INET;
00412 
00413     hp = gethostbyname(uri-&gt;host);
00414 
00415     <span class="keywordflow">if</span> (hp &amp;&amp; hp-&gt;h_addrtype == AF_INET)
00416         memcpy(&amp;sad-&gt;sin_addr.s_addr, hp-&gt;h_addr, <span class="keyword">sizeof</span>(in_addr_t));
00417     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((saddr = inet_addr(uri-&gt;host)) != INADDR_NONE)
00418         sad-&gt;sin_addr.s_addr = saddr;
00419     <span class="keywordflow">else</span>
00420         dbg_err(<span class="stringliteral">"invalid host name: \'%s\'"</span>, uri-&gt;host);
00421 
00422     <span class="keywordflow">return</span> 0;
00423 err:
00424     <span class="keywordflow">return</span> ~0;    
00425 }
00426 
<a name="l00436"></a><a class="code" href="group__net.html#ga17">00436</a> <span class="keywordtype">int</span> <a class="code" href="group__net.html#ga17">u_accept</a>(<span class="keywordtype">int</span> ld, <span class="keyword">struct</span> sockaddr *addr, <span class="keywordtype">int</span> *addrlen)
00437 {
00438     <span class="keywordtype">int</span> ad = -1;
00439 
00440 again:
00441     ad = accept(ld, addr, addrlen);
00442     <span class="keywordflow">if</span>(ad == -1 &amp;&amp; (errno == EINTR))
00443         <span class="keywordflow">goto</span> again; <span class="comment">/* interrupted */</span>
00444 
00445     <span class="keywordflow">return</span> ad;
00446 }
00447 
<a name="l00455"></a><a class="code" href="group__net.html#ga18">00455</a> <span class="keywordtype">int</span> <a class="code" href="group__net.html#ga18">u_net_nagle_off</a> (<span class="keywordtype">int</span> sd)
00456 {
00457 <span class="preprocessor">#if defined(HAVE_TCP_NODELAY) &amp;&amp; defined(HAVE_SETSOCKOPT)</span>
00458 <span class="preprocessor"></span>    <span class="keywordtype">int</span> rc, on = 1;
00459 
00460     dbg_return_if (sd &lt; 0, ~0);
00461 
00462     rc = setsockopt(sd, IPPROTO_TCP, TCP_NODELAY, (<span class="keywordtype">void</span> *) &amp;on, <span class="keyword">sizeof</span> on);
00463     dbg_err_sifm (rc == -1, <span class="stringliteral">"error disabling Nagle algorithm on sd %d"</span>, sd);
00464 
00465     <span class="keywordflow">return</span> 0;
00466 err:
00467     <span class="keywordflow">return</span> ~0;
00468 <span class="preprocessor">#else </span><span class="comment">/* !HAVE_TCP_NODELAY || !HAVE_SETSOCKOPT */</span>
00469     u_unused_args(sd);
00470     dbg(<span class="stringliteral">"%s is not implemented on this platform"</span>, __FUNCTION__);
00471     <span class="keywordflow">return</span> 0;
00472 <span class="preprocessor">#endif  </span><span class="comment">/* !HAVE_TCP_NODELAY */</span>
00473 }
00474 
</pre></div><hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/kl/cont/gb/html/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2008 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
