<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LibU: Networking</title>
<link href="kl.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a></div>
<h1>Networking</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="ga19" doxytag="net::u_net_write" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga19">u_net_write</a>(sd, buf, nbytes, nw, iseof)&nbsp;&nbsp;&nbsp;u_io((iof_t) write, sd, buf, nbytes, nw, iseof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">u_io specialisation for output ops <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="ga20" doxytag="net::u_net_read" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga20">u_net_read</a>(sd, buf, nbytes, nw, iseof)&nbsp;&nbsp;&nbsp;u_io(read, sd, buf, nbytes, nw, iseof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">u_io specialisation for input ops <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="ga21" doxytag="net::u_net_writen" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga21">u_net_writen</a>(sd, buf, nbytes)&nbsp;&nbsp;&nbsp;u_io((iof_t) write, sd, buf, nbytes, 0, 0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to write a chunk of <code>nbytes</code> data to descriptor <code>sd</code>. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="ga22" doxytag="net::u_net_readn" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga22">u_net_readn</a>(sd, buf, nbytes)&nbsp;&nbsp;&nbsp;u_io(read, sd, buf, nbytes, 0, 0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to read a chunk of <code>nbytes</code> data from descriptor <code>sd</code>. <br><br></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga0">u_net_sock</a> (const char *uri, int mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Top level socket creation routine.  <a href="#ga0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga17">u_accept</a> (int ld, struct sockaddr *addr, int *addrlen)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">accept(2) wrapper that handles EINTR  <a href="#ga17"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__net.html#ga18">u_net_nagle_off</a> (int sd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable Nagle algorithm on the supplied TCP socket.  <a href="#ga18"></a><br><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga17" doxytag="net.c::u_accept" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int u_accept </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>ld</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>struct sockaddr *&nbsp;</td>
          <td class="mdname" nowrap> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>addrlen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>ld</em>&nbsp;</td><td>file descriptor </td></tr>
    <tr><td valign=top><em>addr</em>&nbsp;</td><td>see accept(2) </td></tr>
    <tr><td valign=top><em>addrlen</em>&nbsp;</td><td>size of addr struct</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>on success returns the socket descriptor; on failure returns -1 </dd></dl>

<p>
Definition at line <a class="el" href="net_8c-source.html#l00436">436</a> of file <a class="el" href="net_8c-source.html">net.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga18" doxytag="net.c::u_net_nagle_off" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int u_net_nagle_off </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>sd</em>&nbsp;</td><td>a TCP socket descriptor</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><code>0</code> if successful, <code>~0</code> on error </dd></dl>

<p>
Definition at line <a class="el" href="net_8c-source.html#l00455">455</a> of file <a class="el" href="net_8c-source.html">net.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="net.c::u_net_sock" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int u_net_sock </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>uri</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This routine creates a socket and returns its file descriptor. A <em>client</em> socket (<code>U_NET_CSOCK</code>) is identified by its connection endpoint, a <em>server</em> socket (<code>U_NET_SSOCK</code>) by its local address.<p>
The identification is done via a family of private URIs:<ul>
<li>{tc,ud}p[46]://&lt;host&gt;:&lt;port&gt; for TCP/UDP over IPv[46] addresses,</li><li>unix://&lt;abs_path&gt; for UNIX IPC pathnames.</li></ul>
<p>
After resolving the supplied URI, the control is passed to the appropriate handler which carries out the real job (i.e. <code>connect(2)</code> or <code>bind(2)</code>). Per-protocol handlers can be used in combination with the URI resolver and translation functions for greater flexibility.<p>
<dl compact><dt><b>See also:</b></dt><dd>u_net_tcp4_ssock, u_net_tcp6_ssock, u_net_tcp4_csock, u_net_tcp6_csock, u_net_uri2addr, u_net_uri2sin, u_net_uri2sun.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>uri</em>&nbsp;</td><td>the URI at which the socket shall be connected/bounded </td></tr>
    <tr><td valign=top><em>mode</em>&nbsp;</td><td><code>U_NET_SSOCK</code> for server sockets, <code>U_NET_CSOCK</code> for clients.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>the socket descriptor on success</li><li><code>-1</code> on failure </li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="net_8c-source.html#l00052">52</a> of file <a class="el" href="net_8c-source.html">net.c</a>.    </td>
  </tr>
</table>
<hr>
<div>
  <div style="text-align:left">
    <a href="http://www.koanlogic.com/kl/cont/gb/html/products.html">&larr;Products</a>
  </div>
  <div style="text-align:center;">
    &copy; 2005-2008 - <a href="http://www.koanlogic.com">KoanLogic S.r.l.</a> - All rights reserved
  </div>
</div>

</body>
</html>
